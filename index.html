<!doctype html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Trang bắt đầu — ntd.github.io</title>
    <meta name="description" content="Trang bắt đầu để truy cập nhanh các Lab trong repository ShiroYuuki0401/ntd.github.io" />
    <style>
      :root{--bg:#0f1724;--card:#0b1220;--muted:#9aa4b2;--accent:#6ee7b7}
      html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(180deg,#071127 0%, #0f1724 100%);color:#e6eef6}
      .wrap{max-width:920px;margin:48px auto;padding:28px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.04));border-radius:12px;box-shadow:0 6px 30px rgba(2,6,23,0.6)}
      header{display:flex;align-items:center;gap:16px}
      .logo{width:68px;height:68px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#60a5fa);display:flex;align-items:center;justify-content:center;font-weight:700;color:#052020}
      h1{margin:0;font-size:1.6rem}
      p.lead{color:var(--muted);margin-top:6px}
      .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px;margin-top:20px}
      .card{background:rgba(255,255,255,0.02);padding:14px;border-radius:10px;border:1px solid rgba(255,255,255,0.03)}
      a.btn{display:inline-block;padding:10px 14px;border-radius:8px;background:var(--accent);color:#052020;font-weight:600;text-decoration:none}
      footer{margin-top:20px;color:var(--muted);font-size:0.9rem}
      code{background:#071022;padding:2px 6px;border-radius:6px;color:#cde}
      .list{margin-top:12px}
      .dir{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:8px;background:rgba(255,255,255,0.01);margin-bottom:8px}
      .dir a{color:var(--accent);text-decoration:none}
      .muted{color:var(--muted)}
      @media (max-width:520px){.wrap{margin:20px;padding:18px}}
    </style>
  </head>
  <body>
    <main class="wrap">
      <header>
        <div class="logo">NTD</div>
        <div>
          <h1>Trang bắt đầu — ntd.github.io</h1>
          <p class="lead">Dùng trang này để duyệt nhanh các Lab trong repository. Danh sách sẽ được lấy trực tiếp từ GitHub và hiển thị các thư mục (Lab) có trong repo.</p>
        </div>
      </header>

      <section aria-label="Liên kết nhanh" class="grid">
        <article class="card">
          <h3>Danh sách Lab (tự động)</h3>
          <p class="muted">Danh sách thư mục ở mức gốc của repository. Nhấn "Xem trang" để mở nội dung trên GitHub Pages (nếu có), hoặc "Mã nguồn" để xem trên GitHub.</p>

          <div id="labs" class="list">
            <p class="muted">Đang tải danh sách...</p>
          </div>

          <p style="margin-top:10px" class="muted">Nếu API GitHub bị hạn chế hoặc không phản hồi, trang sẽ hiển thị các liên kết thủ công phía dưới.</p>
        </article>

        <article class="card">
          <h3>Liên kết thường dùng</h3>
          <p class="lead">Một số liên kết tĩnh để truy cập nhanh (nếu có trong repo).</p>
          <p><a class="btn" href="Lab01/">Mở Lab01</a></p>
          <p style="margin-top:8px"><a class="btn" href="Lab01/Ex1/cv.html">Mở CV (Lab01/Ex1)</a></p>

          <div style="margin-top:12px;color:var(--muted);font-size:0.9rem">
            Mở trên GitHub (thư mục gốc):
            <a style="color:var(--accent);text-decoration:underline" href="https://github.com/ShiroYuuki0401/ntd.github.io/tree/main" target="_blank" rel="noopener noreferrer">Xem mã nguồn trên GitHub</a>
          </div>
        </article>
      </section>

      <footer>
        <p>© 2025 Nguyen Thanh Dat — Repository: <code>ShiroYuuki0401/ntd.github.io</code></p>
      </footer>
    </main>

    <script>
      // Lấy danh sách thư mục gốc từ GitHub API và hiển thị chúng
      const owner = 'ShiroYuuki0401';
      const repo = 'ntd.github.io';
      const ref = 'main';
      const labsContainer = document.getElementById('labs');

      function encodePathSegment(name){
        return encodeURIComponent(name).replace(/%20/g, '%20');
      }

      async function loadRootDirs(){
        try{
          const res = await fetch(`https://api.github.com/repos/${owner}/${repo}/contents?ref=${ref}`);
          if(!res.ok) throw new Error('HTTP ' + res.status);
          const items = await res.json();
          const dirs = items.filter(i => i.type === 'dir');

          if(dirs.length === 0){
            labsContainer.innerHTML = '<p class="muted">Không tìm thấy thư mục nào trong gốc repository.</p>';
            return;
          }

          labsContainer.innerHTML = '';
          dirs.forEach(d => {
            const div = document.createElement('div');
            div.className = 'dir';

            const title = document.createElement('div');
            title.innerHTML = `<strong>${d.name}</strong><div class="muted" style="font-size:0.9rem">${d.path}</div>`;

            const links = document.createElement('div');
            const siteHref = `/${encodePathSegment(d.name)}/`;
            const gitHref = `https://github.com/${owner}/${repo}/tree/${ref}/${encodePathSegment(d.name)}`;
            links.innerHTML = `<a class="btn" href="${siteHref}">Xem trang</a> <a style="margin-left:8px;color:var(--accent)" href="${gitHref}" target="_blank" rel="noopener noreferrer">Mã nguồn</a>`;

            div.appendChild(title);
            div.appendChild(links);
            labsContainer.appendChild(div);
          });
        }catch(err){
          console.error('Lỗi khi lấy danh sách từ GitHub API', err);
          labsContainer.innerHTML = `
            <div class="muted">Không thể lấy danh sách tự động (GitHub API trả lỗi). Hiển thị liên kết thủ công:</div>
            <div style="margin-top:8px">
              <div class="dir"><div><strong>Lab01</strong></div><div><a class="btn" href="/Lab01/">Xem trang</a> <a style="margin-left:8px;color:var(--accent)" href="https://github.com/${owner}/${repo}/tree/${ref}/Lab01" target="_blank" rel="noopener noreferrer">Mã nguồn</a></div></div>
            </div>
          `;
        }
      }

      // Khởi chạy
      loadRootDirs();
    </script>
  </body>
</html>
